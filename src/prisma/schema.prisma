generator client {
  provider = "prisma-client"
  output   = "./generated/prisma"
}

datasource db {
  provider = "mysql"
}

model booking {
  id             Int             @id @default(autoincrement())
  userId         Int
  hotelId        Int
  checkInDate    DateTime
  checkOutDate   DateTime
  roomCategoryId Int
  createdAt      DateTime        @default(now())
  updatedAt      DateTime
  status         booking_status  @default(PENDING)
  totalGuests    Int
  bookingAmount  Int
  idempotencykey idempotencykey?
}

model idempotencykey {
  id        Int      @id @default(autoincrement())
  idemKey   String   @unique(map: "IdempotencyKey_idemKey_key")
  createdAt DateTime @default(now())
  updatedAt DateTime
  finalized Boolean  @default(false)
  bookingId Int      @unique(map: "IdempotencyKey_bookingId_key")
  booking   booking  @relation(fields: [bookingId], references: [id], map: "IdempotencyKey_bookingId_fkey")
}

enum booking_status {
  PENDING
  CONFIRMED
  CANCELLED
}
